cpu "8085.tbl"
hof "int8"
org 8000h
UPDDT: EQU 044CH
UPDAD: EQU 0440H


START :	MVI A,01H
		STA 9000H
		MVI A,02H
		STA 9001H
		MVI A,03H
		STA 9002H
		MVI A,04H
		STA 9003H
		MVI A,05H
		STA 9004H
		MVI A,00H
		STA 9005H
		MVI A,0BH
		SIM
		EI
		XRA A
LOOP : 	INR A
		JMP LOOP


org 8FBFH
JUMP 8700H


org 8700H
PUSH PSW
LDA 9005H
INR A
XRI 04H
JZ INI
INI : 	MVI 01H
		STA 9005H
		JMP COUNT
COUNT : LDA 9005H
		XRI 01H
		JZ SUM5
		LDA 9005H
		XRI 02H
		JZ AVG5
		LDA 9005H
		XRI 03H
		JZ CMPNTSUM5

SUM5 : 	MVI A,00H
		MOV B,9000H
		ADD B
		MOV B,9001H
		ADD B
		MOV B,9002H
		ADD B
		MOV B,9003H
		ADD B
		MOV B,9004H
		ADD B
		STA 8FF1H
		CALL UPDDT
		POP PSW
		EI
		RET

AVG5 : 	MVI A,00H
		MOV B,9000H
		ADD B
		MOV B,9001H
		ADD B
		MOV B,9002H
		ADD B
		MOV B,9003H
		ADD B
		MOV B,9004H
		ADD B
		DIV:	MVI D,05H
				MVI B,00H
		LS:		CMP D
				JC L
				SUB D
				INR B
				JMP LS
		L:		MOV A,B
		STA 8FF1H
		CALL UPDDT
		POP PSW
		EI
		RET

CMPNTSUM5 :	MVI 9000H
		CMA
		MOV C,A
		MVI 9001H
		CMA
		ADD C
		MOV C,A
		MVI 9002H
		CMA
		ADD C
		MOV C,A
		MVI 9003H
		CMA
		ADD C
		MOV C,A
		MVI 9004H
		CMA
		ADD C
		MOV C,A
		STA 8FF1H
		CALL UPDAD
		CALL UPDDT
		POP PSW
		EI
		RET





		













